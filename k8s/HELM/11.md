# 1.2

```
purfreak@Tashas-MBP:/git/core-course-labs$ kubectl create secret generic token --from-literal=token=test
secret/token created

purfreak@Tashas-MBP:/git/core-course-labs$ kubectl describe secret token
Name:         token
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  Opaque

Data
====
token:  12 bytes

purfreak@Tashas-MBP:/git/core-course-labs$ kubectl get secret token -o jsonpath='{.data.token}' | base64 --decode
test
```

# 1.3

```
purfreak@Tashas-MBP:/git/core-course-labs/k8s/HELM/app-python$ kubectl get po
NAME                          READY   STATUS    RESTARTS   AGE
app-python-59fc676669-75f9k   1/1     Running   0          28s

purfreak@Tashas-MBP:/git/core-course-labs/k8s/HELM/app-python$ kubectl exec app-python-74496b96dc-z472j -- printenv | grep "VAULT"
VAULT=VALUE
```

# 2.1

```
$ cat /vault/secrets/database-config.txt
SECRET:SECRET_VAULT
$ df -h
Filesystem      Size  Used Avail Use% Mounted on
overlay        1007G   13G  943G   2% /
tmpfs            64M     0   64M   0% /dev
tmpfs           8.4G  4.0K  8.4G   0% /vault/secrets
tmpfs           2.5G     0  2.5G   0% /sys/fs/cgroup
/dev/sde       1007G   13G  943G   2% /etc/hosts
shm              64M     0   64M   0% /dev/shm
tmpfs           128M   12K  128M   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs           2.5G     0  2.5G   0% /proc/asound
tmpfs           2.5G     0  2.5G   0% /proc/acpi
tmpfs           2.5G     0  2.5G   0% /proc/scsi
tmpfs           2.5G     0  2.5G   0% /sys/firmware
```

# Bonus task

```
purfreak@Tashas-MBP:/git/core-course-labs/k8s/HELM/app-python$ kubectl describe po app-python-6bcfc97bbf-wk7gw
Name:             app-python-6bcfc97bbf-wk7gw
Namespace:        default
Priority:         0
Service Account:  app-python
Node:             minikube/192.168.49.2
Start Time:       Wed, 15 Nov 2023 03:59:37 +0300
Labels:           app.kubernetes.io/instance=app-python
                  app.kubernetes.io/managed-by=Helm
                  app.kubernetes.io/name=app-python
                  app.kubernetes.io/version=1.16.0
                  helm.sh/chart=app-python-0.1.0
                  pod-template-hash=6bcfc97bbf
                  test=test
Annotations:      vault.hashicorp.com/agent-inject: true
                  vault.hashicorp.com/agent-inject-secret-database-config.txt: internal/data/database/config
                  vault.hashicorp.com/agent-inject-status: update
                  vault.hashicorp.com/agent-inject-template-database-config.txt:
                    {{- with secret "internal/data/database/config" -}}
                    VAULT:{{ .Data.data.token }}
                    {{- end -}}
                  vault.hashicorp.com/role: app-python
Status:           Running
IP:               10.244.0.12
IPs:
  IP:           10.244.0.12
Controlled By:  ReplicaSet/app-python-6bcfc97bbf
Containers:
  app-python:
    Container ID:   docker://a5b49fe6d085e3d63ab1612efab1fcb4655d73e85f376cc63204f42f9b74583a
    Image:          purfreak/lab2_devops:latest
    Image ID:       docker-pullable://purfreak/lab2_devops@sha256:eed82959126954e8808f1fe2becfe7a078bc0cdf676ec40ec2e8689576f11d59
    Port:           8000/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Wed, 15 Nov 2023 03:59:40 +0300
    Ready:          False
    Restart Count:  0
    Limits:
      cpu:     100m
      memory:  128Mi
    Requests:
      cpu:      100m
      memory:   128Mi
    Liveness:   http-get http://:8000/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Readiness:  http-get http://:8000/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Environment:
      TEST:  TEST
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-cgmpn (ro)
Conditions:
  Type              Status
  Initialized       True
  Ready             False
  ContainersReady   False
  PodScheduled      True
Volumes:
  kube-api-access-cgmpn:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   Guaranteed
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age               From               Message
  ----     ------     ----              ----               -------
  Normal   Scheduled  24s               default-scheduler  Successfully assigned default/app-python-6bcfc97bbf-wk7gw to minikube
  Normal   Pulled     22s               kubelet            Container image "purfreak/lab2_devops:latest" already present on machine
  Normal   Created    22s               kubelet            Created container app-python
  Normal   Started    21s               kubelet            Started container app-python
```

```
purfreak@Tashas-MBP:/git/core-course-labs/k8s/HELM/app-python$ kubectl describe po app-js-796db79c6b-q8cbz
Name:             app-js-796db79c6b-q8cbz
Namespace:        default
Priority:         0
Service Account:  app-js
Node:             minikube/192.168.49.2
Start Time:       Wed, 15 Nov 2023 04:01:07 +0300
Labels:           app.kubernetes.io/instance=app-js
                  app.kubernetes.io/managed-by=Helm
                  app.kubernetes.io/name=app-js
                  app.kubernetes.io/version=1.16.0
                  helm.sh/chart=app-js-0.1.0
                  pod-template-hash=796db79c6b
                  test=test
Annotations:      <none>
Status:           Running
IP:               10.244.0.13
IPs:
  IP:           10.244.0.13
Controlled By:  ReplicaSet/app-js-796db79c6b
Containers:
  app-js:
    Container ID:   docker://300c074402458203abd21c7b3f9d5971b8793632a56b56bce430ac73bbc1cfe5
    Image:          purfreak/lab2_devops:latest-js
    Image ID:       docker-pullable://purfreak/lab2_devops@sha256:361295b3abd967a1b2b166fbef1b7a815a89d5accc47c30976442a87515c08b0
    Port:           3000/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Wed, 15 Nov 2023 04:01:29 +0300
    Ready:          False
    Restart Count:  0
    Limits:
      cpu:     100m
      memory:  128Mi
    Requests:
      cpu:      100m
      memory:   128Mi
    Liveness:   http-get http://:3000/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Readiness:  http-get http://:3000/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Environment:
      TEST2:  TEST2
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-5cv69 (ro)
Conditions:
  Type              Status
  Initialized       True
  Ready             False
  ContainersReady   False
  PodScheduled      True
Volumes:
  kube-api-access-5cv69:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   Guaranteed
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age   From               Message
  ----     ------     ----  ----               -------
  Normal   Scheduled  24s   default-scheduler  Successfully assigned default/app-js-796db79c6b-q8cbz to minikube
  Normal   Pulling    23s   kubelet            Pulling image "purfreak/lab2_devops:latest-js"
  Normal   Pulled     4s    kubelet            Successfully pulled image "purfreak/lab2_devops:latest-js" in 19.731314413s (19.731357111s including waiting)
  Normal   Created    2s    kubelet            Created container app-js
  Normal   Started    2s    kubelet            Started container app-js
```
